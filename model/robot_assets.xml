<mujocoinclude>
    <compiler angle="radian" meshdir="resources/meshes/" texturedir='resources/textures/'
        inertiafromgeom="true" eulerseq="zyx" autolimits="true" />
    <size njmax="500" nconmax="100" nstack="600000" nuser_body="9" nuser_jnt="1" nuser_site="1"
        nuser_tendon="1" nuser_actuator="16" nuser_sensor="1" />

    <option gravity="0 0 -9.81" timestep="0.002" />
    <option iterations="50" noslip_iterations="50" />

    <visual>
        <global offwidth="3024" offheight="1680" />
        <quality shadowsize="4096" offsamples="8" />
        <map force="0.1" fogend="5" />
    </visual>
    <default class="main">
        <joint limited="true" margin="0.01" armature="0.01" damping="0.05" frictionloss="0.02" />
        <default class="pid">
            <position
                forcerange="-8.95000000 8.95000000" forcelimited="true" kp="1000" kv="20" />
        </default>
        <geom friction="1 0.5 0.01" margin="0.0005" />
        <site size="0.005 0 0" rgba="0.4 0.9 0.4 0" />
        <general ctrllimited="true" ctrlrange="-1 1"
            user="0 1 0.03 0.0939711 0.513477 0.0358776 1.23598 8.40409 0.485031 6.04244 1.02187 0.175297 0.121642 0 0 0" />
        <default class="touch">
            <site size="0.009 0.004 0.013" group="4" type="box" rgba="0.0 0.0 0.0 0.0" />
            <general
                user="0 1 0.03 0.0939711 0.513477 0.0358776 1.23598 8.40409 0.485031 6.04244 1.02187 0.175297 0.121642 0 0 0" />
        </default>
        <default class="collision">
            <geom conaffinity="0" group="4" material="MatColl" solref="0.004 1"
                solimp="0.90 0.95 0.001 0.5 2" />
            <general
                user="0 1 0.03 0.0939711 0.513477 0.0358776 1.23598 8.40409 0.485031 6.04244 1.02187 0.175297 0.121642 0 0 0" />
        </default>
        <default class="visual">
            <geom type="mesh" contype="0" conaffinity="0" group="1" material="MatViz" />
            <general
                user="0 1 0.03 0.0939711 0.513477 0.0358776 1.23598 8.40409 0.485031 6.04244 1.02187 0.175297 0.121642 0 0 0" />
        </default>
        <default class="free">
            <joint type="free" limited="false" armature="0" damping="0" />
            <general
                user="0 1 0.03 0.0939711 0.513477 0.0358776 1.23598 8.40409 0.485031 6.04244 1.02187 0.175297 0.121642 0 0 0" />
        </default>
    </default>

    <asset>
        <texture type="cube" name="texgeom" builtin="flat" mark="cross" rgb1="0.3 0.6 0.5"
            rgb2="0.3 0.6 0.5" width="127" height="762" />
        <texture type="cube" name="wood" file="wood.png" />
        <texture type="2d" name="wood2d" file="wood.png" />
        <texture type="cube" name="square" file="square.png" />
        <texture type="cube" name="foil" file="silverRaw.png" />
        <texture type="cube" name="woodb" file="woodb.png" />
        <texture type="2d" name="groundplane" builtin="checker" rgb1="0.2 0.3 0.4"
            rgb2="0.1 0.2 0.3" width="100" height="100" />
        <texture type="2d" name="marble2d" file="marble.png" />
        <texture type="cube" name="marblecube" file="marble.png" />
        <material name="MatColl" specular="1" shininess="0.3" reflectance="0.5" rgba="0.4 0.5 0.6 1" />
        <material name="MatViz" specular="0.75" shininess="0.1" reflectance="0.5"
            rgba="0.9 0.7 0.5 1" />
        <material name="MatGnd" specular="0.3" shininess="0.3" reflectance="0.3"
            rgba="0.5 0.55 0.5 1" />
        <material name="object" texture="texgeom" />
        <material name="groundplane" texture="groundplane" texrepeat="10 10" />
        <material name="table2d" texture="marble2d" reflectance="0.3" rgba="0.8 0.8 0.8 1" />
        <material name="tablecube" texture="marblecube" rgba="0.8 0.8 0.8 1" />
        <material name="MatFoil" texture="foil" specular="1" shininess="0.3" rgba="0.9 0.9 0.9 1" />
        <material name="MatPlane" specular="0.3" shininess="0.3" rgba="0.3 0.3 0.2 1" />
        <material name="MatWood" texture="wood" texrepeat="3 3" specular="0.4" shininess="0.1" />
        <material name="MatSquare" texture="square" specular="1" shininess="0.6"
            rgba="0.8 0.8 0.8 1" />
        <material name="MatWoodR" texture="wood" specular="1" shininess="0.3" rgba="1 0.5 0.5 1" />
        <material name="MatWoodG" texture="wood" specular="1" shininess="0.3" rgba="0.2 1 0.2 1" />
        <material name="MatWoodB" texture="woodb" specular="1" shininess="0.3" />
        <texture builtin="gradient" height="100" rgb1="1 1 1" rgb2="0 0 0" type="skybox" width="100" />
        <texture builtin="checker" height="1000" name="texplane" rgb1="0 0 0" rgb2="0.8 0.8 0.8"
            type="2d" width="1000" />
        <material name="geom" texture="texgeom" texuniform="true" />
        <material name="palm_lower_material" rgba="1 1 1 1.0" />
        <material name="proximal_phalanx_1_material" rgba="0.0 0 0 1.0" />
        <material name="proximal_phalanx_2_material" rgba="0.0 0 0 1.0" />
        <material name="middle_phalanx_material" rgba="0.0 0 0 1.0" />
        <material name="distal_phalanx_material" rgba="1 1 1 1.0" />
        <material name="thumb_semi_palm_2_material" rgba="0 0 0 1.0" />
        <material name="thumb_middle_phalanx_material" rgba="0 0 0 1.0" />
        <material name="thumb_distal_phalanx_material" rgba="1 1 1 1.0" />
        <material name="default_material" rgba="0.7 0.7 0.7 1" />
        <mesh name="palm_lower_collision.stl" file="palm_lower_collision.stl" />
        <mesh name="palm_lower.stl" file="palm_lower.stl" />
        <mesh name="proximal_phalanx_1_collision.stl" file="proximal_phalanx_1_collision.stl" />
        <mesh name="proximal_phalanx_1.stl" file="proximal_phalanx_1.stl" />
        <mesh name="proximal_phalanx_2_collision.stl" file="proximal_phalanx_2_collision.stl" />
        <mesh name="proximal_phalanx_2.stl" file="proximal_phalanx_2.stl" />
        <mesh name="middle_phalanx_collision.stl" file="middle_phalanx_collision.stl" />
        <mesh name="middle_phalanx.stl" file="middle_phalanx.stl" />
        <mesh name="distal_phalanx_collision.stl" file="distal_phalanx_collision.stl" />
        <mesh name="distal_phalanx.stl" file="distal_phalanx.stl" />
        <mesh name="thumb_semi_palm_collision.stl" file="thumb_semi_palm_collision.stl" />
        <mesh name="thumb_semi_palm.stl" file="thumb_semi_palm.stl" />
        <mesh name="thumb_middle_phalanx_collision.stl" file="thumb_middle_phalanx_collision.stl" />
        <mesh name="thumb_middle_phalanx.stl" file="thumb_middle_phalanx.stl" />
        <mesh name="thumb_distal_phalanx_collision.stl" file="thumb_distal_phalanx_collision.stl" />
        <mesh name="thumb_distal_phalanx.stl" file="thumb_distal_phalanx.stl" />
    </asset>

    <actuator>
        <position name="index_pip_flex_joint_ctrl" joint="index_pip_flex_joint"
            ctrlrange="-0.314 2.23"
            ctrllimited="true" class="pid" />
        <position name="index_pip_abb_joint_ctrl" joint="index_pip_abb_joint"
            forcelimited="true" ctrlrange="-1.047 1.047"
            ctrllimited="true" class="pid" />
        <position name="index_mcp_joint_ctrl" joint="index_mcp_joint"
            ctrlrange="-0.506 1.885"
            ctrllimited="true" class="pid"/>
        <position name="index_dip_joint_ctrl" joint="index_dip_joint"
            ctrlrange="-0.366 2.042"
            ctrllimited="true" class="pid"/>
        <position name="middle_pip_flex_joint_ctrl" joint="middle_pip_flex_joint"
            ctrlrange="-0.314 2.23"
            ctrllimited="true" class="pid"/>
        <position name="middle_pip_abb_joint_ctrl" joint="middle_pip_abb_joint"
            ctrlrange="-1.047 1.047"
            ctrllimited="true" class="pid"/>
        <position name="middle_mcp_joint_ctrl" joint="middle_mcp_joint"
            ctrlrange="-0.506 1.885"
            ctrllimited="true" class="pid"/>
        <position name="middle_dip_joint_ctrl" joint="middle_dip_joint"
            ctrlrange="-0.366 2.042"
            ctrllimited="true" class="pid"/>
        <position name="ring_pip_flex_joint_ctrl" joint="ring_pip_flex_joint"
            ctrlrange="-0.314 2.23"
            ctrllimited="true" class="pid"/>
        <position name="ring_pip_abb_joint_ctrl" joint="ring_pip_abb_joint"
            ctrlrange="-1.047 1.047"
            ctrllimited="true" class="pid"/>
        <position name="ring_mcp_joint_ctrl" joint="ring_mcp_joint"
            ctrlrange="-0.506 1.885" ctrllimited="true" class="pid"/>
        <position name="ring_dip_joint_ctrl" joint="ring_dip_joint"
            ctrlrange="-0.366 2.042" ctrllimited="true" class="pid"/>
        <position name="thumb_cmc_abb_joint_ctrl" joint="thumb_cmc_abb_joint"
            ctrlrange="-0.349 2.094"
            ctrllimited="true" class="pid" />
        <position name="thumb_cmc_flex_joint_ctrl" joint="thumb_cmc_flex_joint"
            ctrlrange="-2.47 2.443"
            ctrllimited="true" class="pid"/>
        <position name="thumb_mcp_joint_ctrl" joint="thumb_mcp_joint"
            ctrlrange="-1.2 1.9"
            ctrllimited="true" class="pid"/>
        <position name="thumb_ip_joint_ctrl" joint="thumb_ip_joint"
            ctrlrange="-1.34 1.88" ctrllimited="true" class="pid"/>
    </actuator>

    <sensor>
        <!-- <framepos name="base_link_pos" objtype="site" objname="palm_lower_site" />
        <framequat name="base_link_quat" objtype="site" objname="palm_lower_site" />
        <framelinvel name="base_link_vel" objtype="site" objname="palm_lower_site" />
        <frameangvel name="base_link_ang_vel" objtype="site" objname="palm_lower_site" /> -->

        <actuatorfrc actuator="index_pip_flex_joint_ctrl" name="Saf_index_pip_flex_joint_ctrl" />
        <actuatorfrc actuator="index_pip_abb_joint_ctrl" name="Saf_index_pip_abb_joint_ctrl" />
        <actuatorfrc actuator="index_mcp_joint_ctrl" name="Saf_index_mcp_joint_ctrl" />
        <actuatorfrc actuator="index_dip_joint_ctrl" name="Saf_index_dip_joint_ctrl" />
        <actuatorfrc actuator="middle_pip_flex_joint_ctrl" name="Saf_middle_pip_flex_joint_ctrl" />
        <actuatorfrc actuator="middle_pip_abb_joint_ctrl" name="Saf_middle_pip_abb_joint_ctrl" />
        <actuatorfrc actuator="middle_mcp_joint_ctrl" name="Saf_middle_mcp_joint_ctrl" />
        <actuatorfrc actuator="middle_dip_joint_ctrl" name="Saf_middle_dip_joint_ctrl" />
        <actuatorfrc actuator="ring_pip_flex_joint_ctrl" name="Saf_ring_pip_flex_joint_ctrl" />
        <actuatorfrc actuator="ring_pip_abb_joint_ctrl" name="Saf_ring_pip_abb_joint_ctrl" />
        <actuatorfrc actuator="ring_mcp_joint_ctrl" name="Saf_ring_mcp_joint_ctrl" />
        <actuatorfrc actuator="ring_dip_joint_ctrl" name="Saf_ring_dip_joint_ctrl" />
        <actuatorfrc actuator="thumb_cmc_abb_joint_ctrl" name="Saf_thumb_cmc_abb_joint_ctrl" />
        <actuatorfrc actuator="thumb_cmc_flex_joint_ctrl" name="Saf_thumb_cmc_flex_joint_ctrl" />
        <actuatorfrc actuator="thumb_mcp_joint_ctrl" name="Saf_thumb_mcp_joint_ctrl" />
        <actuatorfrc actuator="thumb_ip_joint_ctrl" name="Saf_thumb_ip_joint_ctrl" />

        <!-- ======= Touch Sensors ======= -->

        <touch name="ST_palm_lower" site="palm_lower_site" />
        <touch name="ST_index_fingertip_site" site="index_fingertip_site" />
        <touch name="ST_middle_fingertip_site" site="middle_fingertip_site" />
        <touch name="ST_ring_fingertip_site" site="ring_fingertip_site" />
        <touch name="ST_thumb_fingertip_site" site="thumb_fingertip_site" />

        <jointpos joint="index_pip_flex_joint" name="Sjp_index_pip_flex_joint" />
        <jointpos joint="index_pip_abb_joint" name="Sjp_index_pip_abb_joint" />
        <jointpos joint="index_mcp_joint" name="Sjp_index_mcp_joint" />
        <jointpos joint="index_dip_joint" name="Sjp_index_dip_joint" />
        <jointpos joint="middle_pip_flex_joint" name="Sjp_middle_pip_flex_joint" />
        <jointpos joint="middle_pip_abb_joint" name="Sjp_middle_pip_abb_joint" />
        <jointpos joint="middle_mcp_joint" name="Sjp_middle_mcp_joint" />
        <jointpos joint="middle_dip_joint" name="Sjp_middle_dip_joint" />
        <jointpos joint="ring_pip_flex_joint" name="Sjp_ring_pip_flex_joint" />
        <jointpos joint="ring_pip_abb_joint" name="Sjp_ring_pip_abb_joint_" />
        <jointpos joint="ring_mcp_joint" name="Sjp_ring_mcp_joint" />
        <jointpos joint="ring_dip_joint" name="Sjp_ring_dip_joint" />
        <jointpos joint="thumb_cmc_abb_joint" name="Sjp_thumb_cmc_abb_joint" />
        <jointpos joint="thumb_cmc_flex_joint" name="Sjp_thumb_cmc_flex_joint" />
        <jointpos joint="thumb_mcp_joint" name="Sjp_thumb_mcp_joint" />
        <jointpos joint="thumb_ip_joint" name="Sjp_thumb_ip_joint" />
    </sensor>

    <!-- self collisions -->
    <contact>
        <pair geom1="palm_lower_collision_0" geom2="index_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="palm_lower_collision_0" geom2="middle_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="palm_lower_collision_0" geom2="ring_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="palm_lower_collision_0" geom2="thumb_distal_phalanx_collision_0" condim="3"/>

        <pair geom1="index_distal_phalanx_collision_0" geom2="middle_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="index_distal_phalanx_collision_0" geom2="ring_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="index_distal_phalanx_collision_0" geom2="thumb_distal_phalanx_collision_0" condim="3"/>
        
        <pair geom1="middle_distal_phalanx_collision_0" geom2="ring_distal_phalanx_collision_0" condim="3"/>
        <pair geom1="middle_distal_phalanx_collision_0" geom2="thumb_distal_phalanx_collision_0" condim="3"/>
        
        <pair geom1="ring_distal_phalanx_collision_0" geom2="thumb_distal_phalanx_collision_0" condim="3"/>

    </contact>


</mujocoinclude>